(this["webpackJsonpreact-nlp-rule-editor"]=this["webpackJsonpreact-nlp-rule-editor"]||[]).push([[0],{117:function(e,t,n){},119:function(e,t,n){},221:function(e,t,n){},223:function(e,t,n){},224:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),i=n(18),a=n.n(i),s=(n(117),n(41)),o=n(53),l=n(71),u=n(34),d=n.n(u),j=n(110),b=n(54),p=n(11);n(119);function h(){return O.apply(this,arguments)}function O(){return(O=Object(b.a)(d.a.mark((function e(){var t,n,r,c=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:"",n=c.length>1&&void 0!==c[1]?c[1]:{},e.next=4,fetch(t,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 4:return r=e.sent,e.abrupt("return",r.json());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var f=n(52),v=n.n(f),x=n(10),m=n(112),g=n(111),y=n(35);var R=n(19),N=n(8),C=n(1),k={relation:{color:"rgba(0, 123, 255, 1.0)"},type:{color:"rgba(255, 193, 7, 1.0)"},property:{color:"rgba(30, 138, 55, 1.0)"},unit:{color:"rgba(25, 197, 224, 1.0)"},unknown:{color:"rgba(220, 53, 69, 1.0)"}},w=Object(C.jsx)(N.a,{id:"popover-basic",children:Object(C.jsxs)(N.a.Content,{children:["All ",Object(C.jsx)("span",{style:k.type,children:"windows"})," should have a ",Object(C.jsx)("span",{style:k.property,children:"width"})," of ",Object(C.jsx)("span",{style:k.unit,children:"no less than 15 inch"})," and a ",Object(C.jsx)("span",{style:k.property,children:"height"})," of ",Object(C.jsx)("span",{style:k.unit,children:"no more than 2 feet"})," and is ",Object(C.jsx)("span",{style:k.relation,children:"above"})," a ",Object(C.jsx)("span",{style:k.type,children:"sink"}),"."]})}),S=Object(C.jsx)(N.a,{id:"popover-basic",children:Object(C.jsx)(N.a.Content,{children:"The type of the object (Chair, Refrigerator, etc.)."})}),E=Object(C.jsx)(N.a,{id:"popover-basic",children:Object(C.jsx)(N.a.Content,{children:"Properties the object possesses (width, height, etc.)"})}),T=Object(C.jsx)(N.a,{id:"popover-basic",children:Object(C.jsx)(N.a.Content,{children:"The relationship between objects (directly against, above, below, between)."})}),D=Object(C.jsx)(N.a,{id:"popover-basic",children:Object(C.jsx)(N.a.Content,{children:"Units of measurement used (in, ft, m)."})}),J=Object(C.jsx)(N.a,{id:"popover-basic",children:Object(C.jsx)(N.a.Content,{children:"Unrecognized component."})}),P=Object(C.jsx)(N.a,{id:"popover-basic",children:Object(C.jsx)(N.a.Content,{children:"Here some suggested words ;)"})}),A=function(){return Object(C.jsx)(R.a,{trigger:"click",placement:"top",overlay:w,children:Object(C.jsx)(x.a,{variant:"primary",children:"Example"})})},L=function(){return Object(C.jsx)(R.a,{trigger:["hover","focus"],placement:"top",overlay:S,children:Object(C.jsx)(x.a,{variant:"outline-warning",children:"Type"})})},U=function(){return Object(C.jsx)(R.a,{trigger:["hover","focus"],placement:"top",overlay:E,children:Object(C.jsx)(x.a,{variant:"outline-success",children:"Property"})})},K=function(){return Object(C.jsx)(R.a,{trigger:["hover","focus"],placement:"top",overlay:T,children:Object(C.jsx)(x.a,{variant:"outline-primary",children:"Relation"})})},F=function(){return Object(C.jsx)(R.a,{trigger:["hover","focus"],placement:"top",overlay:D,children:Object(C.jsx)(x.a,{variant:"outline-info",children:"Unit"})})},I=function(){return Object(C.jsx)(R.a,{trigger:["hover","focus"],placement:"top",overlay:J,children:Object(C.jsx)(x.a,{variant:"outline-danger",children:"Unknown"})})},z=(n(220),RegExp("Relation","g")),B=RegExp("Type","g"),H=RegExp("Property","g"),M=RegExp("Unit","g"),V=RegExp("Unknown","g"),W=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).compositeDecorator=new y.CompositeDecorator([{strategy:q,component:$},{strategy:G,component:_},{strategy:Q,component:ee},{strategy:X,component:te},{strategy:Y,component:ne}]),r.state={editorState:y.EditorState.createEmpty(r.compositeDecorator),categories:{types:[],properties:[],relations:[],units:[],unknowns:[]}},r.editor=c.a.createRef(),r.focus=function(){return r.editor.current.focus()},r.onChange=function(e){e.getCurrentContent().getPlainText()!==r.state.editorState.getCurrentContent().getPlainText()&&r.props.parentCallback(e.getCurrentContent().getPlainText()),r.setState({editorState:e})},r}return Object(o.a)(n,[{key:"componentDidUpdate",value:function(e){if(e.activeRule!==this.props.activeRule){var t=this.state.editorState.getSelection(),n=y.ContentState.createFromText(this.props.activeRule.Description),r=y.EditorState.create({currentContent:n,selection:t,decorator:this.compositeDecorator});this.setState({editorState:r}),this.props.parentCallback(r.getCurrentContent().getPlainText())}}},{key:"render",value:function(){return Object(C.jsx)("div",{id:"editor-container",style:re.root,children:Object(C.jsx)("div",{id:"editor",style:re.editor,onClick:this.focus,children:Object(C.jsx)(y.Editor,{editorState:this.state.editorState,onChange:this.onChange,placeholder:"Enter your rule here, then press Submit.",ref:this.editor,spellCheck:!0})})})}}]),n}(c.a.Component);function q(e,t,n){Z(z,e,t)}function G(e,t,n){Z(B,e,t)}function Q(e,t,n){Z(H,e,t)}function X(e,t,n){Z(M,e,t)}function Y(e,t,n){Z(V,e,t)}function Z(e,t,n){for(var r,c,i=t.getText();null!==(r=e.exec(i));)n(c=r.index,c+r[0].length)}var $=function(e){return Object(C.jsx)("span",{style:re.relation,"data-offset-key":e.offsetKey,children:e.children})},_=function(e){return Object(C.jsx)("span",{style:re.type,"data-offset-key":e.offsetKey,children:e.children})},ee=function(e){return Object(C.jsx)("span",{style:re.property,"data-offset-key":e.offsetKey,children:e.children})},te=function(e){return Object(C.jsx)("span",{style:re.unit,"data-offset-key":e.offsetKey,children:e.children})},ne=function(e){return Object(C.jsx)(R.a,{trigger:"focus",placement:"top",overlay:P,children:Object(C.jsx)("span",{style:re.unknown,"data-offset-key":e.offsetKey,children:e.children})})},re={root:{fontFamily:"'Helvetica', sans-serif",paddingBottom:10,width:600},editor:{border:"1px solid #ddd",cursor:"text",fontSize:16,minHeight:40,padding:10},button:{marginTop:10,textAlign:"center"},relation:{color:"rgba(0, 123, 255, 1.0)"},type:{color:"rgba(255, 193, 7, 1.0)"},property:{color:"rgba(40, 167, 69, 1.0)"},unit:{color:"rgba(23, 162, 184, 1.0)"},unknown:{color:"rgba(220, 53, 69, 1.0)"},suggestions:{float:"right",width:"1%",right:"-100px"}};n(221);function ce(e){var t=Object(r.useState)(e.activeRule.description),n=Object(p.a)(t,2),c=n[0],i=n[1],a=Object(r.useState)(e.activeRule.translation),s=Object(p.a)(a,2),o=s[0],l=s[1],u=Object(r.useState)(e.activeRule.retranslation),d=Object(p.a)(u,2),j=d[0],b=d[1],O=Object(r.useState)(e.activeRule.ErrorLevel),f=Object(p.a)(O,2),v=f[0],m=f[1];Object(r.useEffect)((function(){m(e.activeRule.ErrorLevel),l(e.activeRule.translation),b(e.activeRule.retranslation)}),[e.activeRule]);function g(t){t.preventDefault(),l("Processing..."),b(""),h("/api/translate",{rule:c,customobjects:e.customObjects}).then((function(t){try{l(t.response);var n=JSON.parse(t.rule);n.translation=t.response,n.retranslation=t.retranslation,n.Name=e.activeRule.Name,n.ErrorLevel=v,e.updateActiveRule(n)}catch(r){console.log(r)}}))}return Object(C.jsx)("form",{onSubmit:g,children:Object(C.jsxs)("div",{id:"input-form",children:[Object(C.jsx)(W,{className:"input-editor",parentCallback:function(e){e!==c&&i(e)},activeRule:e.activeRule,customObjects:e.customObjects}),Object(C.jsxs)("div",{className:"wrapper",children:[Object(C.jsx)("br",{}),Object(C.jsxs)("select",{className:"select-css",onChange:function(e){m(e.target.value)},value:v,children:[Object(C.jsx)("option",{value:"Recommended",children:"Error Level: Recommended"}),Object(C.jsx)("option",{value:"Warning",children:"Error Level: Warning"}),Object(C.jsx)("option",{value:"Error",children:"Error Level: Error"})]})]}),Object(C.jsx)(x.a,{onClick:g,variant:"outline-primary",size:"lg",block:!0,children:"Submit"}),Object(C.jsxs)("div",{id:"response-wrapper",children:[Object(C.jsx)("br",{}),Object(C.jsx)("div",{id:"response-content",children:o}),Object(C.jsx)("br",{}),Object(C.jsx)("div",{id:"retranslation-content",children:j})]})]})})}n(222),n(223);var ie=n(59);var ae=function(e){var t=Object(r.useState)(!1),n=Object(p.a)(t,2),c=n[0],i=n[1],a=Object(r.useState)(e.ruleset),s=Object(p.a)(a,2),o=s[0],l=s[1];function u(t){e.selectActiveRule(e.ruleset.Rules.find((function(e){return e.Name===t.target.innerText})))}Object(r.useEffect)((function(){l(e.ruleset)}),[e.ruleset,e.activeRule]);var d=o.Rules.map((function(t){return t===e.activeRule?Object(C.jsx)("div",{className:"list-option rounded active-rule",onClick:u,children:t.Name},t.Name):Object(C.jsx)("div",{className:"list-option rounded",onClick:u,children:t.Name},t.Name)})),j=Object(C.jsx)(N.a,{id:"popover-basic",children:Object(C.jsx)(N.a.Content,{children:"Press here to create or modify your rulesets."})});return Object(C.jsxs)("nav",{className:c?"sidebar active":"sidebar",children:[Object(C.jsx)(R.a,{trigger:["hover","focus"],placement:"right",defaultShow:!0,overlay:j,children:Object(C.jsx)("button",{outline:"none",className:"hamburger hamburger--elastic",type:"button",onClick:function(){return i(!c)},children:Object(C.jsx)("span",{outline:"none",className:"hamburger-box",children:Object(C.jsx)("span",{outline:"none",className:"hamburger-inner"})})})}),Object(C.jsxs)(ie.a,{defaultActiveKey:"0",children:[Object(C.jsxs)(ie.a.Toggle,{as:"div",className:"rules-accordion",eventKey:"0","data-toggle":"collapse",children:[Object(C.jsx)("label",{children:"Rules"}),Object(C.jsx)("div",{className:"fa fa-chevron-down"})]}),Object(C.jsx)(ie.a.Collapse,{eventKey:"0",children:Object(C.jsx)("div",{id:"ruleset-sidebar-list",children:Object(C.jsxs)("ul",{children:[d,Object(C.jsx)("div",{className:"list-option add-rule-button rounded",onClick:function(t){e.addNewRule(),l(e.ruleset)},children:Object(C.jsx)("div",{className:"fa fa-plus"})})]})})})]}),Object(C.jsx)("hr",{}),Object(C.jsxs)("div",{id:"ruleset-naming",children:[Object(C.jsx)("label",{children:"Ruleset Name"}),Object(C.jsx)("input",{id:"ruleset-name-box",className:"form-control",type:"text",defaultValue:o.name,onChange:function(t){var n=o;n.Name=t.target.value,e.setRuleset(n),l(n)}}),Object(C.jsx)("br",{}),Object(C.jsx)("label",{children:"Description"}),Object(C.jsx)("textarea",{id:"ruleset-description-box",className:"form-control",type:"text",defaultValue:o.description,onChange:function(t){var n=o;n.Description=t.target.value,e.setRuleset(n),l(n)}})]}),Object(C.jsxs)("div",{id:"json-buttons",children:[Object(C.jsx)(x.a,{className:"btn ",variant:"outline-primary",id:"import-button",onClick:function(){return document.getElementById("import-file").click()},children:"Import JSON"}),Object(C.jsx)(x.a,{className:"btn",variant:"outline-primary",id:"export-button",onClick:e.exportJson,children:"Export to JSON"})]})]})};function se(e){var t=Object(r.useState)({}),n=Object(p.a)(t,2),c=n[0],i=n[1];function a(e,t){return e[t].map((function(e){return Object(C.jsx)("li",{children:e},e)}))}var s=Object.keys(c).map((function(t){return e.customObjects.includes(t)?"":Object(C.jsxs)("div",{className:"warning-card",children:[Object(C.jsxs)("h5",{children:['Token "',t,'" was not recognized. Most similar:']}),Object(C.jsx)("ul",{children:a(c,t)}),Object(C.jsx)(x.a,{className:"btn btn-outline-danger",variant:"outline",onClick:function(){return function(t){e.addCustomObject(t);var n=v.a.clone(c);delete n[t],i(n)}(t)},children:"Use Anyways"})]})}));return Object(C.jsx)("div",{id:"toast-container",children:s})}var oe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Name",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Description",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[new le];Object(s.a)(this,e),this.Name=t,this.Description=n,this.Rules=r}return Object(o.a)(e,[{key:"addTempRule",value:function(e,t){var n=new le(e,t);this.Rules.push(n)}},{key:"update",value:function(e,t){var n=this.Rules.indexOf(e);this.Rules[n]=t}},{key:"removeRule",value:function(e){var t=this.Rules.findIndex(e);this.Rules.pop(t)}}]),e}(),le=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Rule",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Recommended";Object(s.a)(this,e),this.Name=t,this.Description=n,this.ErrorLevel=r},ue=function(){var e,t=Object(r.useState)(new oe("New Ruleset","Ruleset",[new le("Rule1","","Recommended")])),n=Object(p.a)(t,2),c=n[0],i=n[1],a=Object(r.useState)(1),s=Object(p.a)(a,2),o=s[0],u=s[1],O=Object(r.useState)(c.Rules[0]),f=Object(p.a)(O,2),v=f[0],m=f[1],g=Object(r.useState)([]),y=Object(p.a)(g,2),R=y[0],N=(y[1],function(){1===c.Rules.length&&c.addTempRule("Rule1","");var e=c.Rules.indexOf(v);e===c.Rules.length-1?m(c.Rules[e-1]):m(c.Rules[e+1]),c.Rules.splice(e,1)}),k=function(e){var t=new FileReader;t.onload=function(){var e=Object(b.a)(d.a.mark((function e(t){var n,r,a,s,l,b;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.result;try{r=JSON.parse(n),a=new oe(r[0].Name,r[0].Description,r[0].Rules),s=Object(j.a)(a.Rules);try{for(b=function(){var e=l.value;h("/api/translate",{rule:e.Description}).then((function(t){try{e.translation=t.response,e.retranslation=t.retranslation}catch(n){console.log(n)}}))},s.s();!(l=s.n()).done;)b()}catch(d){s.e(d)}finally{s.f()}i(a),u(a.Rules.length),0===o&&c.addTempRule("Rule1",""),m(a.Rules[0])}catch(p){alert("Parsing failed, please check file and try again.")}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.readAsText(e.target.files[0])};return Object(C.jsx)("div",(e={className:"App"},Object(l.a)(e,"className","container-fluid"),Object(l.a)(e,"children",Object(C.jsxs)("div",{className:"row",children:[Object(C.jsx)("div",{id:"left-sidebar",className:"col-md",children:Object(C.jsx)(ae,{ruleset:c,activeRule:v,selectActiveRule:function(e){m(e)},addNewRule:function(){var e="Rule"+(o+1);u(o+1),c.addTempRule(e,"")},deleteActiveRule:N,setRuleset:i,exportJson:function(){var e=JSON.parse(JSON.stringify(c)),t=e.Rules.filter((function(e){return!(e instanceof le)}));t.map((function(e){delete e.translation,delete e.retranslation})),e.Rules=t;var n="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify([e])),r=document.createElement("a");r.href="data:"+n,r.download=c.Name+".json",r.click()},uploadHandler:k})}),Object(C.jsxs)("div",{id:"main-content",className:"col-md-8",children:[Object(C.jsxs)("div",{id:"App-header",children:[Object(C.jsx)("h1",{children:"Natural Language Rules"}),Object(C.jsx)("h5",{children:"Natural language to JSON rule conversion."})]}),Object(C.jsxs)("div",{id:"category-buttons",children:[Object(C.jsx)(L,{}),Object(C.jsx)(U,{}),Object(C.jsx)(K,{}),Object(C.jsx)(F,{}),Object(C.jsx)(I,{}),Object(C.jsx)(A,{})]}),Object(C.jsx)("div",{id:"editor",children:Object(C.jsx)(ce,{activeRule:v,updateActiveRule:function(e){c.update(v,e),m(e)},customObjects:R})}),Object(C.jsxs)(x.a,{id:"delete-button",className:"btn btn-danger",onClick:N,children:["Delete ",Object(C.jsx)("i",{className:"fa fa-trash"})]}),Object(C.jsx)("input",{style:{visibility:"hidden"},type:"file",name:"file",id:"import-file",onChange:k})]}),Object(C.jsx)("div",{id:"right-sidebar",className:"col-md",children:Object(C.jsx)(se,{addCustomObject:function(e){R.push(e)},customObjects:R})})]})),e))},de=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,229)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),i(e),a(e)}))};a.a.render(Object(C.jsx)(c.a.StrictMode,{children:Object(C.jsx)(ue,{})}),document.getElementById("root")),de()}},[[224,1,2]]]);
//# sourceMappingURL=main.41bb5477.chunk.js.map